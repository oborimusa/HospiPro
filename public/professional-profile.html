<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Profile & Portfolio | HospiPro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        :root{ --gold: #c9a44c; --brown: #3b2f2f; }
        body{ font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#f7f5f1; }
        .sidebar{ width: 250px; background: var(--brown); height: 100vh; position: fixed; padding-top: 20px; }
        .sidebar a{ color: rgba(255, 255, 255, 0.7); padding: 10px 15px; display: block; text-decoration: none; }
        .sidebar a:hover, .sidebar a.active{ background: #4a3c3c; color: white; border-left: 3px solid var(--gold); }
        .main-content{ margin-left: 250px; padding: 20px; }
        .portfolio-img{ height: 150px; object-fit: cover; border-radius: 8px; }
    </style>
</head>
<body>
    
    <div class="sidebar">
        <div class="text-center mb-4">
            <h5 class="text-white">HospiPro</h5>
            <small class="text-gold">Service Professional</small>
        </div>
        <a href="professional-dashboard.html">üè† Dashboard</a>
        <a href="professional-profile.html" class="active">üë§ Profile & Portfolio</a>
        <a href="professional-bookings.html">üóìÔ∏è Booking Management</a>
        <a href="professional-clients.html">üë• Client Management</a>
        <a href="professional-billing.html">üíµ Billing & Payments</a>
        <hr class="text-white-50">
        <a href="#" id="logoutBtn">‚û°Ô∏è Log Out</a>
    </div>

    <div class="main-content">
        <h1 class="mb-4 text-brown">Profile & Portfolio Management</h1>

        <ul class="nav nav-tabs mb-4" id="profileTab" role="tablist">
            <li class="nav-item" role="presentation"><button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button" role="tab">Profile Details</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button" role="tab">Services Offered</button></li>
            <li class="nav-item" role="presentation"><button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Reviews & Ratings</button></li>
        </ul>

        <div class="tab-content">
            
            <div class="tab-pane fade show active" id="details" role="tabpanel">
                <h3 class="mb-3 text-brown">Public Profile Editor</h3>
                <div class="alert alert-info small" role="alert">
                    **Pro Plan** unlocks advanced features like portfolio image uploads.
                </div>
                <form>
                    <div class="mb-3">
                        <label class="form-label">Professional Name/Company</label>
                        <input type="text" class="form-control" value="[Professional Name]" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Location/City</label>
                        <input type="text" class="form-control" placeholder="Lagos, Nigeria" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">About/Description (Max 500 characters)</label>
                        <textarea class="form-control" rows="4">Basic description of services...</textarea>
                    </div>
                    
                    <h5 class="mt-4">Portfolio (Pro+ Feature)</h5>
                    <div class="row g-3 mb-3" id="portfolioSection">
                        <div class="col-md-4">
                            <img src="https://via.placeholder.com/200x150?text=Portfolio+Image+1" alt="Portfolio 1" class="w-100 portfolio-img border">
                        </div>
                        <div class="col-md-4">
                            <img src="https://via.placeholder.com/200x150?text=Portfolio+Image+2" alt="Portfolio 2" class="w-100 portfolio-img border">
                        </div>
                        <div class="col-md-4">
                            <button class="btn btn-outline-secondary w-100 h-100" id="uploadBtn" disabled>Upload Image</button>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">Save Profile Details</button>
                </form>
            </div>

            <div class="tab-pane fade" id="services" role="tabpanel">
                <h3 class="mb-3 text-brown">Manage Your Service Listings</h3>
                <button class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#newServiceModal">Add New Service</button>
                
                <ul class="list-group">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span class="fw-bold">Full-Day Event Planning</span>
                        <span class="badge bg-secondary">Category: Planning</span>
                        <button class="btn btn-sm btn-outline-warning">Edit</button>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span class="fw-bold">Wedding Buffet Catering (100 Guests)</span>
                        <span class="badge bg-secondary">Category: Catering</span>
                        <button class="btn btn-sm btn-outline-warning">Edit</button>
                    </li>
                </ul>
            </div>

            <div class="tab-pane fade" id="reviews" role="tabpanel">
                <h3 class="mb-3 text-brown">Client Feedback</h3>
                <div class="alert alert-success d-inline-block p-2 mb-4">
                    **Overall Rating: 4.8 / 5** (12 total reviews)
                </div>
                
                <ul class="list-group small">
                    <li class="list-group-item">
                        **5 Stars** - "Excellent catering service! Highly recommended." - *Client A*
                    </li>
                    <li class="list-group-item">
                        **4 Stars** - "The planning was great, communication could be faster." - *Client B*
                    </li>
                </ul>
            </div>
        </div>
    </div>
    
    <div class="modal fade" id="newServiceModal" tabindex="-1" aria-labelledby="newServiceModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newServiceModalLabel">Add New Service</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3"><input type="text" class="form-control" placeholder="Service Title (e.g., 'Half-Day Consulting')" required></div>
                        <div class="mb-3"><select class="form-select"><option>Catering</option><option>Event Planning</option><option>Laundry</option><option>Other</option></select></div>
                        <div class="mb-3"><textarea class="form-control" placeholder="Detailed description of the service"></textarea></div>
                        <div class="mb-3"><input type="text" class="form-control" placeholder="Starting Price (e.g., $500)"></div>
                        <button type="submit" class="btn btn-success d-block w-100">Create Listing</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <script type="module">
        import { getAuth, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        
        const auth = getAuth();
        const logoutBtn = document.getElementById('logoutBtn');
        const uploadBtn = document.getElementById('uploadBtn');
        
        // Simulate plan gating for Portfolio Upload
        const userPlan = 'free'; 
        
        if (userPlan === 'pro' || userPlan === 'enterprise') {
            uploadBtn.disabled = false;
            uploadBtn.textContent = 'Upload Image';
        }
        
        // Logout functionality (Reused)
        logoutBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            try {
                await signOut(auth);
                window.location.href = "login.html";
            } catch (error) {
                console.error("Logout failed:", error);
            }
        });
    </script>
</body>
</html>