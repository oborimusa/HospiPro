<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login | HospiPro</title>
    <meta
      name="description"
      content="Login to HospiPro – your one-stop hub for hospitality jobs, business management, and professional growth."
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f7f9fc;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      .login-container {
        max-width: 420px;
        margin: 5rem auto;
        background: #fff;
        padding: 2rem;
        border-radius: 15px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      }
      .brand {
        text-align: center;
        margin-bottom: 2rem;
      }
      .brand h3 {
        font-weight: 700;
        /* Updated brand name text for consistency with your project name */
        color: #0d6efd; 
      }
      .google-btn {
        background-color: #db4437 !important; 
        color: white !important;
        border: none;
      }
      .google-btn:hover {
        background-color: #c23321 !important;
      }
    </style>
  </head>
  <body>
    <div class="login-container">
      <div class="brand">
        <h3>HospiPro</h3> 
        <p class="text-muted">Welcome back! Please log in to continue.</p>
      </div>

      <form id="loginForm">
        <div class="mb-3">
          <label for="email" class="form-label">Email address</label>
          <input
            type="email"
            id="email"
            class="form-control"
            placeholder="name@example.com"
            required
          />
        </div>
        <div class="mb-4">
          <label for="password" class="form-label">Password</label>
          <input
            type="password"
            id="password"
            class="form-control"
            placeholder="••••••••"
            required
          />
        </div>
        <button type="submit" class="btn btn-primary w-100 mb-3">Login</button>
        <div class="text-center text-muted my-3 small">
            — OR —
        </div>
        <button id="googleLogin" type="button" class="btn google-btn w-100">
          <i class="bi bi-google me-2"></i> Continue with Google
        </button>
      </form>

      <p class="text-center mt-4 small">
        Don’t have an account?
        <a href="signup.html">Sign up here</a>
      </p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script type="module">
    // 1. Import ONLY the SDKs needed (no Firestore needed for just login and hardcoded redirect)
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import {
        getAuth,
        signInWithEmailAndPassword,
        GoogleAuthProvider,
        signInWithPopup,
    } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

    // 2. Firebase config (HospiPro)
    const firebaseConfig = {
        apiKey: "AIzaSyCgDu8Pd2IcvIWRYnxnASoNvrxjC3rJ3Ok", 
        authDomain: "hospipro-86b8d.firebaseapp.com",
        projectId: "hospipro-86b8d",
        storageBucket: "hospipro-86b8d.firebasestorage.app",
        messagingSenderId: "801856698977",
        appId: "1:801856698977:web:05562aaf88584d2af0c820",
    };

    // 3. Initialize Firebase services
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // Define the single target dashboard URL
    const DASHBOARD_URL = "service-providerdashboard.html";

    // 4. Email/Password Login Handler
    const loginForm = document.getElementById("loginForm");
    loginForm.addEventListener("submit", async (e) => {
        e.preventDefault();
        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;
        
        try {
            await signInWithEmailAndPassword(auth, email, password);
            
            // Success: Hardcode redirect to the specified dashboard
            alert("Login successful! Redirecting to dashboard...");
            window.location.href = DASHBOARD_URL; 
            
        } catch (error) {
            console.error("Login Error:", error);
            
            // Provide a user-friendly error message for security
            let message = error.message;
            if (error.code === 'auth/invalid-credential') {
                message = "Invalid email or password. Please double-check your credentials.";
            } else if (error.code === 'auth/user-disabled') {
                message = "Your account has been disabled.";
            }
            
            alert(`Login failed: ${message}`);
        }
    });

    // 5. Google Login Handler
    const googleBtn = document.getElementById("googleLogin");
    googleBtn.addEventListener("click", async () => {
        try {
            await signInWithPopup(auth, provider);
            
            // Success: Hardcode redirect to the specified dashboard
            alert("Google login successful! Redirecting to dashboard...");
            window.location.href = DASHBOARD_URL;
            
        } catch (error) {
            console.error("Google Login Error:", error);
            alert("Google login failed: " + error.message);
        }
    });
</script>
  </body>
</html>